<!DOCTYPE html>
<html lang="jp">

<head>
    <meta charset="UTF-8">
    <meta name="SeihoSuisogaku" content="width=device-width, initial-scale=1.0">
    <title>木曽青峰高校吹奏楽部</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>

<script>
    (function (d) {
        var config = {
            kitId: 'ahd7ucz',
            scriptTimeout: 3000,
            async: true
        },
            h = d.documentElement, t = setTimeout(function () { h.className = h.className.replace(/\bwf-loading\b/g, "") + " wf-inactive"; }, config.scriptTimeout), tk = d.createElement("script"), f = false, s = d.getElementsByTagName("script")[0], a; h.className += " wf-loading"; tk.src = 'https://use.typekit.net/' + config.kitId + '.js'; tk.async = true; tk.onload = tk.onreadystatechange = function () { a = this.readyState; if (f || a && a != "complete" && a != "loaded") return; f = true; clearTimeout(t); try { Typekit.load(config) } catch (e) { } }; s.parentNode.insertBefore(tk, s)
    })(document);
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollToPlugin.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

<afterdeleat>
    <script src="https://assets.codepen.io/16327/GSDevTools3.min.js"></script>
    <script>
        // 2. ツールを起動（これだけで画面下部にUIが出ます）
        //GSDevTools.create();
    </script>
</afterdeleat>

<style>
    a {
        text-decoration: none;
        margin: 0;
    }

    body {
        font-family: "kiwi-maru", sans-serif;
        font-weight: 400;
        font-style: normal;
        margin: 0;
        padding: 0;
        background-color: #C4E1F2;
    }

    /*
    .header {
        position: fixed;
        width: 100%;
        height: 10vh;
        background-color: #BF8A8E;
        display: flex;
        align-items: center;
        box-sizing: border-box;

        opacity: 0;
        pointer-events: auto;
    }

    .header a{
        color: white ;
        margin: 1vh 1vh;
        font-size: 2vh;
    }
    */


    .global-nav ul {
        list-style: none;
        padding: 0;
        display: flex;
        gap: 20px;
    }



    .top {
        height: 100vh;
        width: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        margin: 0;

        background-color: #F2C2CF;

    }

    .top h1 {
        color: black;
        font-size: 4vh;
        font-weight: 500;
        margin: 0;
        opacity: 0;
        transform: translateY(-10vh);
    }

    .top p {
        font-size: 2vh;
        margin: 0;
        opacity: 0;
        transform: translateY(-10vh);
    }

    #line-art {
        margin-top: 30px;
        display: flex;
        position: absolute;
        bottom: 3vh;
        opacity: 0;
        max-height: 50%;
        object-fit: contain;
    }

    /* <scrol main-style> ============================ */

    .main__action {
        display: flex;
        position: absolute;
        bottom: 10vh;
        opacity: 0;
    }

    .main__scroll-text {
        color: rgba(28, 28, 30, 1);
        margin: 0;
    }

    .main__action:hover .main__scroll-box {
        margin: 0;
        animation: scroll-down 3s infinite;
    }

    /* Animate scroll icon */
    @keyframes scroll-down {

        0%,
        100% {
            transform: translateY(0rem);
            opacity: 1;
        }

        35% {
            transform: translateY(1rem);
            opacity: 0;
        }

        70% {
            transform: translateY(-1rem);
            opacity: 0;
        }
    }


    .object {
        opacity: 0;
        transform: translateY(12px);
        will-change: transform, opacity;
    }

    .cefnter {

        display: flex;
        width: 100%;
        flex-direction: column;
        /*縦に並べるため*/
        align-items: stretch;
        justify-content: center;
        font-size: 3vh;
        margin: 0;

    }

    .cefnter h2 {
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 3vh;
        margin: 100px 0 50px 0;
    }

    .cefnter p,
    li {
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: clamp(18px, 1.5vw, 30px);
        margin: auto;
        width: 80%;
        max-width: 1000px;

    }

    button {
        margin: 100px auto auto auto;
        background: transparent;
        position: relative;
        padding: 5px 15px;
        display: flex;
        align-items: center;
        font-size: 17px;
        font-weight: 600;
        cursor: pointer;
        border: 1px solid black;
        border-radius: 25px;
        outline: none;
        overflow: hidden;
        color: black;
        transition: color 0.3s 0.1s ease-out;
        text-align: center;
    }

    button span {
        margin: 10px;
    }

    button::before {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        margin: auto;
        content: "";
        border-radius: 50%;
        display: block;
        width: 20em;
        height: 20em;
        left: -5em;
        text-align: center;
        transition: box-shadow 0.5s ease-out;
        z-index: -1;
    }

    button:hover {
        color: #fff;
        border: 1px solid black;
    }

    button:hover::before {
        box-shadow: inset 0 0 0 10em black;
    }


    .schedule-card {
        display: flex;
        flex-direction: column;
        gap: 5px;
        width: 80%;
        height: auto;
        border-radius: 20px;
        overflow: hidden;
        max-width: 1000px;
        margin: auto;
        padding: 5vw;
        box-sizing: border-box;
    }

    #activities-schedule-card {
        background-color: #ffffff;
    }

    #weekly-schedule-card {
        background-color: #F2D3AC;
    }

    .schedule-item {
        display: flex;
        padding: 15px;
        font-size: clamp(18px, 1.5vw, 30px);
    }

    .month {
        width: 30%;
        font-weight: 500;
    }


    @media screen and (max-width: 768px) {
        .global-nav ul {
            flex-direction: column;
            gap: 10px;
        }

        .header {
            height: auto;
            font-size: 3%;
        }
    }


    /* insta関連CSS */
    .insta-container {
        display: flex;
        gap: 10px;
        /* 写真の間の余白 */
        justify-content: center;
        padding: 20px;
        font-family: sans-serif;
        width: 80%;
        margin: auto;
        flex-wrap: wrap;
    }

    .insta-item {
        position: relative;
        flex: 1;
        /* 均等に広がる */
        aspect-ratio: 1 / 1;
        /* 正方形を維持 */
        overflow: hidden;
        border-radius: 12px;
        flex: 1 1 calc(33.333% - 15px);

    }

    .insta-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.4s ease;
    }

    .insta-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        /* 半透明の黒 */
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        box-sizing: border-box;
        opacity: 0;
        transition: opacity 0.3s ease;
        text-align: center;
        font-size: 0.85rem;
        line-height: 1.4;
        text-decoration: none;
        /* リンクの下線を消す */
    }

    .insta-item:hover .insta-overlay {
        opacity: 1;
    }

    .insta-item video {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    /* ここまで insta関連CSS */


    /* footer */

    .footer {
        width: 100%;
        background-color: #BF8A8E;
        display: flex;
        padding: 40px 20px;
        justify-content: center;
        flex-direction: column;
        box-sizing: border-box;
        margin-top: 100px;
    }

    .footer p {
        font-size: clamp(14px, 1.2vw, 20px);
        line-height: 1.3;
        margin: 0px;
    }

    /* ここまで footerCSS */

    /* フォーム用 */

    .form {
        display: flex;
        flex-direction: column;
        gap: 35px;
        width: 80%;
        height: auto;
        border-radius: 20px;
        overflow: hidden;
        max-width: 1000px;
        margin: auto;
        box-sizing: border-box;
        background-color: #F2C2CF;
        padding: 10vw;
    }


    /*学年トクラス選択メニュー*/
    .menu {
        padding: 0.5rem;
        box-sizing: border-box;
        background-color: #fff;
        position: relative;
        display: flex;
        justify-content: left;
        border-radius: 15px;

        width: 100%;
    }

    .link {
        display: inline-flex;
        justify-content: center;
        align-items: center;
        width: 70px;
        height: 50px;
        border-radius: 8px;
        position: relative;
        z-index: 1;
        overflow: hidden;
        transform-origin: center left;
        transition: width 0.2s ease-in;
        text-decoration: none;
        color: inherit;

        &:before {
            position: absolute;
            z-index: -1;
            content: "";
            display: block;
            border-radius: 8px;
            width: 100%;
            height: 100%;
            top: 0;
            transform: translateX(100%);
            transition: transform 0.2s ease-in;
            transform-origin: center right;
            background-color: #eee;
        }

        &:hover,
        &:focus {
            outline: 0;
            width: 130px;

            &:before,
            .link-title {
                transform: translateX(0);
                opacity: 1;
            }
        }
    }

    .link-icon {
        width: 28px;
        height: 28px;
        display: block;
        flex-shrink: 0;
        left: 18px;
        position: absolute;

        font-size: 28px;
    }

    .link-title {
        transform: translateX(100%);
        transition: transform 0.2s ease-in;
        transform-origin: center right;
        display: block;
        text-align: center;
        text-indent: 28px;
        font-size: 20px;
        width: 100%;
    }
    .inputRadio label {
        font-size: 24px;
        font-weight: 300;
        text-transform: uppercase;
        letter-spacing: 3px;
        margin-bottom: 10px;
    }

    /*フォームのテキストボックス*/

    .inputGroup {
        position: relative;
        width: 100%;
        margin: auto;

    }

    .inputGroup input {
        width: 100%;
        padding: 10px;
        box-sizing: border-box;
        outline: none;
        border: none;
        color: #000;
        font-size: 1em;
        font-weight: 400;
        background: transparent;
        border-left: 2px solid #000;
        border-bottom: 2px solid #000;
        transition: 0.1s;
        border-bottom-left-radius: 8px;

    }

    .inputGroup span {
        top: 0;
        margin-top: 5px;
        position: absolute;
        left: 0;
        transform: translateY(-4px);
        margin-left: 10px;
        padding: 10px;
        pointer-events: none;
        font-size: 12px;
        color: #000;
        text-transform: uppercase;
        transition: 0.5s;
        letter-spacing: 3px;
        border-radius: 8px;
    }

    .inputGroup input:valid~span,
    .inputGroup input:focus~span {
        transform: translateY(-20px);

        padding: 5px 10px;
        background: #000;
        letter-spacing: 0.2em;
        color: #fff;
        border: 2px;
    }

    .inputGroup input:valid,
    .inputGroup input:focus {
        border: 2px solid #000;
        border-radius: 8px;
    }

    .enter {
        height: 45px;
        width: 90px;
        border-radius: 5px;
        border: 2px solid #000;
        cursor: pointer;
        background-color: transparent;
        transition: 0.5s;
        text-transform: uppercase;
        font-size: 10px;
        letter-spacing: 2px;
        margin-bottom: 1em;
        margin: 0;
    }

    .enter:hover {
        background-color: rgb(0, 0, 0);
        color: white;
    }

    /* ここまでフォーム */
</style>

<body>
    <main>
        <section class="top">
            <h1>木曽青峰高校 吹奏楽部</h1>
            <p>Kisoseiho Suisogakubu</p>
            <img src="suibu line art.png" alt="line art" id="line-art" width="70%" height="auto">

            <div class="main__action">
                <a class="main__scroll" href="#" id="scroll-button">
                    <div class="main__scroll-box">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0 0h24v24H0z" fill="none"></path>
                            <path
                                d="M11.9997 13.1716L7.04996     8.22186L5.63574 9.63607L11.9997 16L18.3637 9.63607L16.9495 8.22186L11.9997 13.1716Z"
                                fill="rgba(28,28,30,1)">
                            </path>
                        </svg>
                    </div>
                    <span class="main__scroll-text">Scroll</span>
                </a>
            </div>


        </section>

        <section class="cefnter">
            <div class="object" id="About">
                <h2>About</h2>
                <p>吾輩わがはいは猫である。名前はまだ無い。どこで生れたかとんと見当けんとうがつかぬ。何でも薄暗いじめじめした所でニャーニャー泣いていた事だけは記憶している。吾輩はここで始めて人間というものを見た。しかもあとで聞くとそれは書生という人間中で一番獰悪どうあくな種族であったそうだ。この書生というのは時々我々を捕つかまえて煮にて食うという話である。しかしその当時は何という考もなかったから別段恐しいとも思わなかった。ただ彼の掌てのひらに載せられてスーと持ち上げられた時何だかフワフワした感じがあったば
                </p>
            </div>

            <div class="object" id="instagram">
                <button onclick="window.location.href='https://www.instagram.com/shwo._.official'">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-instagram" viewBox="0 0 16 16">
                        <path
                            d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z">
                        </path>
                    </svg>
                    <span>Instragram</span>
                </button>
                <div id="instagram-feed" class="insta-container">
                    <p id="loading">Loading Instagram Feed...</p>
                </div>
            </div>

            <div class="object" id="Activities">
                <h2>Activities</h2>
                <div class="schedule-card" id="activities-schedule-card">
                    <div class="schedule-item">
                        <div class="month">４月</div>
                        <div class="description">jfjfjfjfj<br>oijsdofi</div>
                    </div>
                    <div class="schedule-item">
                        <div class="month">５月</div>
                        <div class="description">jfjfjfjfj</div>
                    </div>
                    <div class="schedule-item">
                        <div class="month">６月</div>
                        <div class="description">jfjfjfjfj</div>
                    </div>
                    <div class="schedule-item">
                        <div class="month">７月</div>
                        <div class="description">jfjfjfjfj</div>
                    </div>
                    <div class="schedule-item">
                        <div class="month">８月</div>
                        <div class="description">jfjfjfjfj</div>
                    </div>
                    <div class="schedule-item">
                        <div class="month">９月</div>
                        <div class="description">jfjfjfjfj</div>
                    </div>
                    <div class="schedule-item">
                        <div class="month">１０月</div>
                        <div class="description">jfjfjfjfj</div>
                    </div>
                    <div class="schedule-item">
                        <div class="month">１１月</div>
                        <div class="description">jfjfjfjfj</div>
                    </div>
                    <div class="schedule-item">
                        <div class="month">１２月</div>
                        <div class="description">jfjfjfjfj</div>
                    </div>
                    <div class="schedule-item">
                        <div class="month">１月</div>
                        <div class="description">jfjfjfjfj</div>
                    </div>
                    <div class="schedule-item">
                        <div class="month">２月</div>
                        <div class="description">jfjfjfjfj</div>
                    </div>
                    <div class="schedule-item">
                        <div class="month">３月</div>
                        <div class="description">jfjfjfjfj</div>
                    </div>

                </div>
            </div>

            <div class="object" id="Weekly">
                <h2>Weekly</h2>

                <div class="schedule-card" id="weekly-schedule-card">
                    <div class="schedule-item">
                        <div class="month">月</div>
                        <div class="description">理数科・普通科7限あり<br>4:30 ~ 6:30</div>
                    </div>
                    <div class="schedule-item">
                        <div class="month">火</div>
                        <div class="description">OFF</div>
                    </div>
                    <div class="schedule-item">
                        <div class="month">水</div>
                        <div class="description">3:30 ~ 5:30</div>
                    </div>
                    <div class="schedule-item">
                        <div class="month">木</div>
                        <div class="description">7限あり<br>4:30 ~ 6:30</div>
                    </div>
                    <div class="schedule-item">
                        <div class="month">金</div>
                        <div class="description">3:30 ~ 5:30</div>
                    </div>
                    <div class="schedule-item">
                        <div class="month">土 日</div>
                        <div class="description">どちらか<br>8:30 ~ 11:30</div>
                    </div>

                </div>

            </div>
            <div class="object" id="Contact">
                <h2>Contact</h2>
                <form class="form"
                    action="https://docs.google.com/forms/d/e/1FAIpQLSeJ9tKPn-eJnnshtRYWq7_Et_LrKdEKadiApvFCXnqpCPkPtQ/formResponse">
                    <div class="inputGroup" id="form-name">
                        <input type="text" id="name" name="entry.357402207" required="required">
                        <span for="name">お名前</span>
                    </div>
                    <div class="inputRadio" id="form-grade">
                        <label for="grade">学年</label>
                        <div class="menu">
                            <a href="javascript:void(0)" class="link">
                                <span class="material-symbols-outlined link-icon" font-size="28px">counter_1</span>
                                <span class="link-title">１年</span>
                            </a>
                            <a href="javascript:void(0)" class="link">
                                <span class="material-symbols-outlined link-icon">counter_2</span>
                                <span class="link-title">２年</span>
                            </a>
                            <a href="javascript:void(0)" class="link">
                                <span class="material-symbols-outlined link-icon">counter_3</span>
                                <span class="link-title">３年</span>
                            </a>
                        </div>

                    </div>
                    <div class="inputRadio" id="form-class">
                        <span for="class">クラス</span>
                        <div class="menu">
                            <a href="javascript:void(0)" class="link">
                                <span class="material-symbols-outlined link-icon">counter_1</span>
                                <span class="link-title">１組</span>
                            </a>
                            <a href="javascript:void(0)" class="link">
                               
                                <span class="material-symbols-outlined link-icon">counter_2</span>
                                <span class="link-title">２組</span>
                            </a>
                            <a href="javascript:void(0)" class="link">
                                <span class="material-symbols-outlined link-icon">counter_3</span>
                                <span class="link-title">３組</span>
                            </a>
                            <a href="javascript:void(0)" class="link">
                                <span class="material-symbols-outlined link-icon">counter_4</span>
                                <span class="link-title">４組</span>
                            </a>
                        </div>


                    </div>
                    <div class="inputGroup" id="form-tell">
                        <input type="text" id="callnom" name="entry.1805112893" required="required">
                        <span for="callnom">電話番号</span>
                    </div>
                    <div class="inputGroup" id="form-email">
                        <input type="email" id="email" name="entry.601438554" required="required">
                        <span for="email">メールアドレス</span>
                    </div>
                    <div class="inputGroup" id="form-kinds">
                        <textarea id="message" name="entry.1045781291" rows="4" cols="50"
                            required="required"></textarea>
                        <span for="message">種類</span>
                    </div>
                    <div class="inputGroup" id="form-message">
                        <textarea id="message" name="entry.1045781291" rows="4" cols="50"
                            required="required"></textarea>
                        <span for="message">entry.194499310</span>

                    </div>
                    <button class="enter">送信</button>

                </form>
            </div>
        </section>

        <section class="footer">
            <p>木曽青峰高校吹奏楽部</p>
            <p>〒397-0002 長野県木曽郡木曽町福島５２２３番地</p>
            <p>TEL: 0264-22-2133</p>

        </section>
    </main>
</body>


<script>

    const tl = gsap.timeline({ id: "IntroAnim" });

    tl.to(".top h1, .top p", {
        scale: 1,      // 1.2倍まで大きく
        opacity: 1,      // 表示する
        duration: 3,   // 2.5秒かけて
        ease: "power3.out" // 滑らかな動き（減速）
    });

    tl.to("#line-art", {
        opacity: 1,      // 表示する
        duration: 1.5,
        ease: "power1.out"
    }, "<"); // 1秒前から開始

    tl.to(".main__action", {
        opacity: 1,      // 表示する
        scale: 1,      // 1.2倍まで大きく
        duration: 1,   // 2.5秒かけて
        ease: "power3.out" // 滑らかな動き（減速）
    }, "<1.5"); // 1秒前から開始


    // Aboutへのスクロール
    gsap.registerPlugin(ScrollToPlugin);

    const btn = document.querySelector("#scroll-button");

    btn.addEventListener("click", () => {
        gsap.to(window, {
            duration: 1,      // 1.5秒かけて移動
            scrollTo: "#About", // どの要素まで飛ばすか（または数値で 1000 のようにも書ける）
            ease: "power1.inOut"  // 動き出しと止まり際を滑らかに
        });
    });

    // 各セクションのアニメーション
    gsap.utils.toArray(".object").forEach((el) => {
        gsap.to(el, {
            opacity: 1,
            duration: 1,
            y: 0,
            ease: "power1.out",
            scrollTrigger: {
                trigger: el,
                start: "top 85%",
                scrub: false,
            }
        });
    });

    gsap.utils.toArray(".schedule-item").forEach((el) => {
        gsap.from(el, {
            duration: 0.8,
            y: 50,               // 50px下から
            scale: 0.5,          // 半分のサイズから
            rotationX: 30,       // 手前に少し倒れた状態から起き上がる
            opacity: 0,
            stagger: {
                amount: 0.4,       // 全体で0.4秒の間に等間隔で開始
                grid: "auto",      // グリッドレイアウトを自動認識して左上から順に発火
                from: "top"     // 中央から広がるようにしたい場合はここを "center" に
            },

            scrollTrigger: {
                trigger: el,
                start: "top 95%",
                scrub: false,
            },

            ease: "expo.out",    // Macのような高級感のある減速

        });
    });




    //instagram部分

    const accessToken = 'IGAARSi9hRQ0JBZAGFZAMk00ZAGNIWlJ0Nzl5X0tmRGFzUElHZA05RZADR5aGt3UW9UdG8tTl9BV0pjMHNWNWt2T1NOQk45bkdNRWU2SDFSb3lYbXljSVJUQTU2SnlsX19VeWQ2RTVOMWtkS0VGMEpHTmpLWXJaTjI5b1lIMGdCTTE3UQZDZD'; // ここにトークンを入れる
    const url = `https://graph.instagram.com/me/media?fields=id,caption,media_url,permalink,media_type,thumbnail_url&limit=5&access_token=${accessToken}`;

    async function fetchInstaFeed() {
        try {
            const response = await fetch(url);
            const data = await response.json();

            const container = document.getElementById('instagram-feed');
            const loadingText = document.getElementById('loading');

            if (data.data) {
                loadingText.remove(); // 読み込み中を消す

                data.data.forEach(post => {
                    const item = document.createElement('div');
                    item.className = 'insta-item';

                    let mediaHtml = '';

                    // VIDEO（リール）の場合
                    if (post.media_type === 'VIDEO') {
                        mediaHtml = `
                            <video 
                                src="${post.media_url}" 
                                poster="${post.thumbnail_url}" 
                                muted 
                                loop 
                                playsinline 
                                autoPlay
                                style="width:100%; height:100%; object-fit:cover;">
                            </video>`;

                        // マウスホバー時の動作をセット
                        item.onmouseover = () => {
                            const video = item.querySelector('video');
                            if (video) video.play().catch(e => console.log("再生ブロック:", e));
                        };
                        item.onmouseout = () => {
                            const video = item.querySelector('video');
                            if (video) {
                                video.pause();
                                video.currentTime = 0; // 最初に戻す
                            }
                        };

                    } else {
                        // 通常の画像（IMAGE）やカルーセル（CAROUSEL_ALBUM）の場合
                        mediaHtml = `<img src="${post.media_url}" alt="Instagram" style="width:100%; height:100%; object-fit:cover;">`;
                    }

                    item.innerHTML = `
                        ${mediaHtml}
                        <a href="${post.permalink}" target="_blank" class="insta-overlay">
                            <span>${post.caption ? post.caption.substring(0, 50) + '...' : ''}</span>
                        </a>
                    `;
                    container.appendChild(item);
                });
            }
        } catch (error) {
            console.error('データの取得に失敗しました:', error);
            document.getElementById('loading').innerText = '読み込みに失敗しました。';
        }
    }

    fetchInstaFeed();




    document.querySelectorAll('.link').forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            
            // クリックされたテキストを取得（例：１年、２組など）
            const selectedText = this.querySelector('.link-title').textContent;
            
            // 近くにある隠し入力欄（後述）に値をセットする仕組み
            // もしくは、特定のID（hidden-gradeなど）に直接入れる
            if(this.closest('#form-grade')) {
                document.getElementById('hidden-grade').value = selectedText;
            } else if(this.closest('#form-class')) {
                document.getElementById('hidden-class').value = selectedText;
            }

            // 見た目のフィードバック（選択したものをグレーにする）
            this.closest('.menu').querySelectorAll('.link').forEach(l => l.style.background = "");
            this.style.background = "#eee";
            this.style.borderRadius = "8px";
        });
    });



</script>